(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){function i(n){n.state.placeholder&&(n.state.placeholder.parentNode.removeChild(n.state.placeholder),n.state.placeholder=null)}function r(n){var t,r;i(n);t=n.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible";t.style.direction=n.getOption("direction");t.className="CodeMirror-placeholder CodeMirror-line-like";r=n.getOption("placeholder");typeof r=="string"&&(r=document.createTextNode(r));t.appendChild(r);n.display.lineSpace.insertBefore(t,n.display.lineSpace.firstChild)}function e(n){setTimeout(function(){var u=!1,t;n.lineCount()==1&&(t=n.getInputField(),u=t.nodeName=="TEXTAREA"?!n.getLine(0).length:!/[^\u200b]/.test(t.querySelector(".CodeMirror-line").textContent));u?r(n):i(n)},20)}function u(n){f(n)&&r(n)}function t(n){var t=n.getWrapperElement(),u=f(n);t.className=t.className.replace(" CodeMirror-empty","")+(u?" CodeMirror-empty":"");u?r(n):i(n)}function f(n){return n.lineCount()===1&&n.getLine(0)===""}n.defineOption("placeholder","",function(r,f,o){var h=o&&o!=n.Init,s;if(f&&!h){r.on("blur",u);r.on("change",t);r.on("swapDoc",t);n.on(r.getInputField(),"compositionupdate",r.state.placeholderCompose=function(){e(r)});t(r)}else!f&&h&&(r.off("blur",u),r.off("change",t),r.off("swapDoc",t),n.off(r.getInputField(),"compositionupdate",r.state.placeholderCompose),i(r),s=r.getWrapperElement(),s.className=s.className.replace(" CodeMirror-empty",""));f&&!r.hasFocus()&&u(r)})});